{% extends 'base.html' %}

{% block title %}Home - My Website{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
        <div class="welcome-section">
            <h1>Welcome, {{ user.username }}!</h1>
            <form method="POST" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit" class="logout-button">Logout</button>
            </form>
        </div>

        <div class="url-creation-section">
            <h2>Create Your Custom URL</h2>
            <form method="post" class="url-creation-form">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="create-url-button">Create URL</button>
            </form>
        </div>

        {% if user_spaces %}
            <div class="existing-urls-section">
                <h2>Your Existing URLs:</h2>
                <ul class="url-list">
                    {% for space in user_spaces %}
                        <li class="url-item">
                            <a href="{% url 'user_space' space.custom_url %}" class="url-link">
                                {{ space.custom_url }}
                            </a>
                            <a href="{% url 'public_space' space.custom_url %}" class="view-public-link">View Public</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    {% else %}
        <div class="auth-links">
            <a href="{% url 'login' %}" class="auth-link">Login</a>
            <a href="{% url 'authView' %}" class="auth-link">Sign Up</a>
        </div>
    {% endif %}
{% endblock %}
